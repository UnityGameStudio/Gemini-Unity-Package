function doPost(e) {
  var parameter = e.parameter.parameter;

  const apiKey = "SECRET_KEY";

  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`;
  //You can change the model for: gemini-1.5-pro, gemini-1.0-pro, or more. Check the Google webpage here: https://ai.google.dev/gemini-api/docs/models/gemini

  const payload = {contents: [{parts: [{text: parameter}] } ]};
  const res = UrlFetchApp.fetch(url, {
    payload: JSON.stringify(payload),
    contentType: "application/json",
  }
  );

  const obj = JSON.parse(res.getContentText());

  var responseMessage;

if (
  obj.candidates &&
  obj.candidates.length > 0 &&
  obj.candidates[0].content.parts.length > 0
) {
  responseMessage = obj.candidates[0].content.parts[0].text;
} else {
  responseMessage = "Please, try again";
}

  return ContentService.createTextOutput(responseMessage).setMimeType(ContentService.MimeType.TEXT);
}